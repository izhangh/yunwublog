<!DOCTYPE html>
<html lang="en">
<head>
    <include file="Public:header" />
    <title>{$articleData['name']}—{$channelData['name']}—{$Think.config.WEB_NAME}</title>
    <link rel="stylesheet" href="__PUBLIC__/common/css/article.css">
    <link rel="stylesheet" href="__PUBLIC__/editor.md-master/css/editormd.preview.css" />
    <style>
        #custom-toc-container {
            padding-left: 0;
        }
    </style>
</head>
<body ondrag="return false" ondragstart="return false;" style="background: #ebebeb;">
<notempty name="articleData['pic']">
    <!--放大图的imgModal-->
    <div class="modal fade bs-example-modal-lg text-center" id="imgModal"tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" >
        <div class="modal-dialog modal-lg" style="display: inline-block; width: auto;max-width:100%;">
            <div class="modal-content">
                <img id="imgInModalID" src="__ROOT__{$articleData['pic']}" style="display: inline-block; width: auto;max-width:100%;" >
            </div>
        </div>
    </div>
</notempty>
<!-- top begin -->
<include file="Public:top" />
<!-- top end -->

<!--content begin-->
<div class="container mt20">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-sm-12 line_height30 mb5">
            <i class="fa fa-home"></i>
            当前位置：
            <a href="{:U('Index/Index/index')}">首页</a> >
            <eq name="channelData['type']" value="b">
                <a href="{:U(GROUP_NAME.'/'.MODULE_NAME.'/listArticle', array('id' =>  $channelData['id']))}">{$channelData['name']}</a> >
                正文
            </eq>
            <eq name="channelData['type']" value="a">
                {$channelData['name']}
            </eq>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-8">
            <div class="article" style="min-height: 537px;">
                <div class="article-head">
                    <h1 class="article-title">{$articleData['name']}</h1>
                    <section class="article-meta">
                        <span class="author">浏览数：{$articleData['view_num']}</span> •
                        <time class="article-date">发布时间：{$articleData['update_date']}</time>
                    </section>
                </div>
                <div class="article-content" id="editormd-view">
                    <textarea id="markdown-content" style="display:none;">{$articleData['markdown']}</textarea>
                </div>
            </div>
        </div>
        <div class="hidden-xs col-sm-12 col-md-4">
            <div data-spy="affix" data-offset-top="10" data-offset-bottom="200" id="myAffix">
                <div class="markdown-body editormd-preview-container" id="custom-toc-container">#custom-toc-container</div>
            </div>
        </div>
    </div>
</div>
<!-- footer begin -->
<include file="Public:footer" />
<!-- footer end -->
<script src="__PUBLIC__/editor.md-master/lib/marked.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/prettify.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/raphael.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/underscore.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/sequence-diagram.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/flowchart.min.js"></script>
<script src="__PUBLIC__/editor.md-master/lib/jquery.flowchart.min.js"></script>
<script src="__PUBLIC__/editor.md-master/editormd.js"></script>
<script>
    $(function() {
        $('img').click(function(even) {
            even.preventDefault();
            $('#imgInModalID').prop('src', $(this).attr('src'));
            $('#imgModal').modal({
                show: true
            })
        })
        $('#myAffix').affix({
            offset: {
                top: 10,
                bottom: function () {
                    return (this.bottom = $('.footer').outerHeight(true))
                }
            }
        })
        editormd.markdownToHTML("editormd-view", {
            markdown        : $('#markdown-content').text(),
            //htmlDecode      : true,       // 开启 HTML 标签解析，为了安全性，默认不开启
            htmlDecode      : "style,script,iframe",  // you can filter tags decode
            //toc             : false,
            tocm            : true,    // Using [TOCM]
            tocContainer    : "#custom-toc-container", // 自定义 ToC 容器层
            //gfm             : false,
//            tocDropdown     : true,
            markdownSourceCode : false, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签
            emoji           : true,
            taskList        : true,
            tex             : true,  // 默认不解析
            flowChart       : true,  // 默认不解析
            sequenceDiagram : true,  // 默认不解析
        });
    })
</script>
</body>
</html>