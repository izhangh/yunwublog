<extend name="Public:base" />
<block name="appendHeader">
</block>
<block name="appendContent">
    <div class="row">
        <div class="col-md-12 p15 p25">
            <div class="page-header clearfix">
                <h3 class="pull-left nomargin"><i class='fa fa-{$Think.session.curMenu.icon}'></i>{$Think.session.curMenu.name}
            </div>
            <div class="panel panel-default mt25">
                <div class="panel panel-heading text-center"><h2 class="panel-title fontsize20">网站信息配置</h2></div>
                <div class="panel panel-body">
                    <form class="form-horizontal" id="{:GROUP_NAME}{:MODULE_NAME}{:ACTION_NAME}HandleForm" name="{:GROUP_NAME}{:MODULE_NAME}{:ACTION_NAME}HandleForm" action="{:U(GROUP_NAME.'/'.MODULE_NAME.'/handle')}" method="post">
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">网站名称:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="WEB_NAME" name="WEB_NAME" data-bv-field="WEB_NAME" value="{$Think.config.WEB_NAME}" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">网站关键字:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="WEB_KEYWORD" name="WEB_KEYWORD" data-bv-field="WEB_KEYWORD" value="{$Think.config.WEB_KEYWORD}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">网站介绍:</label>
                            <div class="col-sm-6">
                                <textarea class="form-control" style="resize:vertical;" id="WEB_DESCRIBE" name="WEB_DESCRIBE" data-bv-field="WEB_DESCRIBE">{$Think.config.WEB_DESCRIBE}</textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">首页滚动图数量:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="WEB_BANNER" name="WEB_BANNER" data-bv-field="WEB_BANNER" value="{$Think.config.WEB_BANNER}"/>
                                <p class="help-block">建议滚动图数量：1-5张.</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">版权信息:</label>
                            <div class="col-sm-6">
                                <textarea class="form-control" style="resize:vertical;" id="WEB_COPYRIGHT" name="WEB_COPYRIGHT" data-bv-field="WEB_COPYRIGHT">{$Think.config.WEB_COPYRIGHT}</textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-md-offset-1 control-label">超级管理员:</label>
                            <div class="col-sm-6">
                                <select name="ADMINISTRATOR" id="ADMINISTRATOR" data-bv-field="ADMINISTRATOR" class="form-control selectpicker" data-live-search="true">
                                    <foreach name="manage_list" item="v">
                                        <option value="{$v.id}" <eq name="v.id" value="$Think.config.ADMINISTRATOR">selected</eq>>{$v.name}({$v.manage_name})</option>
                                    </foreach>
                                </select>
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <div class="col-sm-8">
                                <button type="submit" class="btn btn-success" data-loading-text="正在提交..." autocomplete="off">提交</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal" id="btnCancelHandleForm{:GROUP_NAME}{:MODULE_NAME}{:ACTION_NAME}">取消</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</block>
<block name="appendFooter">
    <script>
        $(document).ready(function() {
            $('#{:GROUP_NAME}{:MODULE_NAME}{:ACTION_NAME}HandleForm').bootstrapValidator({
                message: '您输入的信息有误，请仔细检查！',
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    WEB_NAME: {
                        validators: {
                            notEmpty: {
                                message: '分组名称必须'
                            },
                            stringLength: {
                                min: 1,
                                max: 200,
                                message: '1-200个字符'
                            }
                        }
                    },
                    WEB_KEYWORD: {
                        validators: {
                            notEmpty: {
                                message: '网站关键字必须'
                            },
                            stringLength: {
                                min: 1,
                                max: 200,
                                message: '1-200个字符'
                            }
                        }
                    },
                    WEB_DESCRIBE: {
                        validators: {
                            notEmpty: {
                                message: '网站关键字必须'
                            },
                            stringLength: {
                                min: 1,
                                max: 200,
                                message: '1-200个字符'
                            }
                        }
                    },
                    WEB_BANNER: {
                        validators: {
                            notEmpty: {
                                message: '首页滚动图数量必须'
                            },
                            integer: {
                                message: '请输入数字'
                            }
                        }
                    },
                    WEB_COPYRIGHT: {
                        validators: {
                            notEmpty: {
                                message: '版权信息必须'
                            },
                            stringLength: {
                                min: 1,
                                max: 200,
                                message: '1-200个字符'
                            }
                        }
                    },
                    WEB_CONTENT1: {
                        validators: {
                            notEmpty: {
                                message: '最新动态（第一块）必须'
                            }
                        }
                    },
                    WEB_CONTENT2: {
                        validators: {
                            notEmpty: {
                                message: '健康知识（第二块）必须'
                            }
                        }
                    },
                    WEB_CONTENT3: {
                        validators: {
                            notEmpty: {
                                message: '中心简介（第三块）必须'
                            }
                        }
                    },
                    WEB_CONTENT4: {
                        validators: {
                            notEmpty: {
                                message: '体检专家（第四块）必须'
                            }
                        }
                    },
                    CHECKTYPE: {
                        validators: {
                            notEmpty: {
                                message: '体检方式必须'
                            }
                        }
                    }
                }
            }).on('success.form.bv', function(e) {
                e.preventDefault();
                var $form = $(e.target);    //获取表单实例
                var bv = $form.data('bootstrapValidator');  //获取bootstrap实例
                //对modal处理
                confirmModalOpen('数据正在处理，请稍等...', '0', ' fa-spinner fa-spin ');     // 提示信息
                //ajax处理
                ajaxDo($form.attr('action'), $form.serialize(), "POST");
                if(ajaxReturnData.status == '200') {
                    confirmModalInfo(ajaxReturnData.info, ' fa-check ');
                    setTimeout(function() {
                        window.location.replace(window.location.href);
                    }, 1000);
                } else if(ajaxReturnData.status == '300') {
                    confirmModalInfo(ajaxReturnData.info, '');
                    setTimeout(function() {
                        confirmModalClose();
                    }, 1000);
                }
            });;
        });
    </script>
</block>